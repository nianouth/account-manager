# 更新日志 (Changelog)

本文档记录账号管理器的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

---

## [2.0.0] - 2026-02-16

### 🎉 重大更新
- **v2.0.0 安全增强 + iOS 风格 UI 重设计**

### 🔒 安全改进
- **主密码安全改造**：使用派生密钥 + 验证数据方案，不再存储主密码原文
- **PBKDF2 迭代次数**：从 100,000 提升到 120,000
- **会话管理**：密钥存储在 Service Worker 内存中，支持 30 分钟超时 / 全天 / 浏览器会话三种模式
- **移除加密失败降级**：加密/解密失败直接抛出异常，不再降级为明文
- **强化 Base64 检测**：4 级严格验证，防止误判
- **首次使用强制设置主密码**：包含密码强度验证（8+ 字符，大小写 + 数字）
- **导出数据保护**：添加安全警告和密码加密验证

### ✨ 新增功能
- **会话管理多模式支持**：30 分钟超时 / 全天有效 / 浏览器会话，解决主密码频繁验证问题
- **延迟验证主密码**：打开扩展不再强制弹窗，操作时按需验证
- **旧数据自动迁移向导**：从 v1.2.0 平滑升级，自动备份

### 🎨 视觉优化
- **iOS 风格 UI 重设计**：Tab 导航 + 现代化界面
- **重新设计扩展图标**：使用现代 iOS 风格蓝紫渐变设计

### ⚡ 性能优化
- **拖拽性能重写**：使用 `translate3d` + `pointer-events` 重写悬浮面板拖拽，彻底消除卡顿

### 🔧 优化改进
- **ES6 模块化重构**：拆分为 5 个工具模块（dom-utils / toast / validation / url-matcher / index），90% 代码复用提升
- **新增 security-manager.js**：核心安全模块，统一管理加密和会话

### 🐛 问题修复
- 修复 `crypto-utils.js` 在 content_scripts 中的 export 语法错误

### 📝 文档更新
- 优化 AI 提示词，增加角色定义、输出约束和字段说明

---

## [1.2.0] - 2026-02-15

### ✨ 新增功能
- **账号收藏功能**：支持收藏常用账号，收藏的账号自动置顶显示
- **一键复制**：快速复制账号和密码到剪贴板，提升操作效率
- **快捷键支持**：
  - `Ctrl/Cmd + K`：快速聚焦搜索框
  - `Ctrl/Cmd + N`：快速添加新账号
  - `Esc`：关闭当前模态框
- **密码强度检测**：实时显示密码强度指示器（弱、中等、强、非常强）
- **彩色 Toast 提示**：提供成功、错误、警告、信息四种类型的视觉反馈
- **加载动画**：添加 Spinner 动画和加载状态提示

### 🎨 视觉优化
- **现代化配色方案**：引入蓝色渐变（#518EFF）、绿色、红色、橙色等配色
- **渐变按钮**：所有主要按钮采用渐变背景，提升视觉层次
- **阴影效果**：优化元素阴影，增强立体感
- **悬停动画**：改进所有交互元素的悬停效果和过渡动画
- **空状态优化**：精美的空状态图标和友好的引导提示

### 💅 UI 改进
- 优化头部渐变背景，增强品牌识别度
- 改进按钮悬停效果，提供更好的视觉反馈
- 优化账号列表显示，收藏账号带星标并置顶
- 增强表单交互体验，添加实时验证
- 统一整体视觉风格，保持设计一致性

### 📝 其他改进
- 更新 README.md 文档，补充新功能说明
- 优化空状态提示文案，提供更友好的用户引导
- 改进错误处理和用户提示
- 提升整体性能和响应速度

---

## [1.1.0] - 2024-12-XX

### ✨ 新增功能
- **实时搜索功能**：支持按用户名或账号快速筛选
- **SPA 路由监听**：支持单页应用的路由变化检测

### 🔧 优化改进
- **网站匹配逻辑优化**：支持路径通配符 `/*`，更灵活的 URL 匹配
- **悬浮面板显示逻辑**：仅在匹配的登录页面显示，避免干扰
- **表单自动填充增强**：改进表单识别和填充准确性
- **UI 设计优化**：现代化界面设计，提升用户体验

### 🔒 安全改进
- **XSS 防护修复**：使用 `textContent` 代替 `innerHTML`，防止代码注入
- **安全的 DOM 操作**：使用 `createElement` 创建元素

### 📝 其他改进
- 改进错误处理机制
- 优化提示信息和用户反馈
- 完善项目文档

---

## [1.0.0] - 2024-11-XX

### 🎉 首次发布

#### 核心功能
- **网站管理**：支持多网站、多环境管理（开发、测试、生产）
- **账号管理**：完整的账号信息管理（用户名、账号、密码、备注）
- **一键登录**：智能表单识别，自动填充并提交登录表单
- **双界面模式**：
  - 弹出窗口（Popup）：完整的管理界面
  - 悬浮面板（Floating Panel）：快速访问当前网站账号

#### 安全特性
- **AES-GCM 加密**：密码使用 Web Crypto API 加密存储
- **本地存储**：所有数据存储在 Chrome 本地，绝不上传
- **XSS 防护**：安全的 DOM 操作，防止代码注入
- **权限最小化**：仅请求必要的浏览器权限

#### 数据管理
- **数据导出**：JSON 格式导出所有数据
- **数据导入**：支持合并导入，数据不会丢失
- **版本控制**：导出文件包含版本信息和时间戳

#### 智能功能
- **智能 URL 匹配**：
  - 精确匹配：`https://example.com/login`
  - 通配符匹配：`https://example.com/login/*`
  - URL 规范化：自动忽略查询参数和锚点
- **自定义登录按钮**：配置登录按钮的 ID 和 Class
- **自动网站切换**：根据当前页面 URL 自动切换对应网站

#### 技术架构
- **核心**：原生 JavaScript (ES6+)
- **框架**：Chrome Extension Manifest V3
- **存储**：Chrome Storage API (local)
- **加密**：Web Crypto API (AES-GCM)
- **浏览器 API**：Tabs API、Scripting API、Runtime API

---

## 图例说明

- 🎉 首次发布 / 重大更新
- ✨ 新增功能
- 🎨 视觉优化
- 💅 UI 改进
- 🔧 优化改进
- 🔒 安全改进
- 🐛 问题修复
- 📝 文档更新
- ⚡ 性能优化
- 🗑️ 移除功能

---

## 链接

- [GitHub 仓库](https://github.com/nianouth/account-manager)
- [问题反馈](https://github.com/nianouth/account-manager/issues)
- [MIT 开源协议](LICENSE)
