# 账号管理器 (Account Manager)

<div align="center">

![版本](https://img.shields.io/badge/版本-1.2.0-blue.svg)
![Chrome](https://img.shields.io/badge/Chrome-88%2B-green.svg)
![License](https://img.shields.io/badge/license-MIT-orange.svg)

**一个安全、高效的 Chrome 浏览器扩展，专为多网站、多账号管理而设计**

[功能特性](#-功能特性) • [快速开始](#-快速开始) • [使用指南](#-使用指南) • [技术架构](#-技术架构)

</div>

---

## 📖 简介

账号管理器是一个强大的 Chrome 浏览器扩展，帮助开发者、测试人员和多账号用户高效管理不同环境（开发、测试、生产）下的多个账号。通过智能网站匹配、一键自动登录、本地加密存储等功能，让账号管理变得安全、便捷。

### 为什么选择账号管理器？

- **🔐 安全第一**：密码使用 AES-GCM 加密，所有数据本地存储，绝不上传
- **⚡ 高效便捷**：智能识别登录页面，一键自动填充并提交表单
- **🎯 精准匹配**：基于 URL 的智能网站匹配，支持通配符
- **🎨 双界面设计**：弹出窗口 + 悬浮面板，适应不同使用场景
- **💾 数据备份**：支持 JSON 格式导入导出，数据安全有保障

---

## ✨ 功能特性

### 核心功能

#### 1️⃣ 网站管理
- **多网站支持**：管理开发、测试、生产等多个环境
- **智能 URL 匹配**：
  - 精确匹配：`https://example.com/login`
  - 通配符匹配：`https://example.com/login/*`
  - URL 规范化：自动忽略查询参数和锚点
- **自定义登录按钮**：配置登录按钮的 ID 和 Class，适配各种网站

#### 2️⃣ 账号管理
- **完整的账号信息**：用户名、账号、密码、备注
- **实时搜索**：按用户名或账号快速筛选
- **密码保护**：支持显示/隐藏切换，确保隐私安全
- **批量操作**：添加、编辑、删除账号，操作便捷
- **⭐ 账号收藏**：收藏常用账号，自动置顶显示
- **📋 一键复制**：快速复制账号和密码到剪贴板
- **🔒 密码强度检测**：实时显示密码强度，确保安全

#### 3️⃣ 一键自动登录
- **智能表单识别**：自动定位用户名和密码输入框
- **自动填充**：一键填充登录信息
- **自动提交**：智能查找并点击登录按钮
- **多选择器支持**：兼容各种表单结构

#### 4️⃣ 双界面模式

**弹出窗口（Popup）**
- 完整的管理界面
- 适合添加、编辑、配置等操作
- 现代化 UI 设计，操作流畅

**悬浮面板（Floating Panel）**
- 仅在匹配的登录页面显示
- 快速访问当前网站账号
- 支持拖拽调整位置
- 位置自动保存

#### 5️⃣ 数据安全
- **AES-GCM 加密**：密码使用 Web Crypto API 加密存储
- **本地存储**：所有数据存储在 Chrome 本地，绝不上传服务器
- **XSS 防护**：使用安全的 DOM 操作，防止代码注入
- **权限最小化**：仅请求必要的浏览器权限

#### 6️⃣ 数据备份与恢复
- **一键导出**：JSON 格式导出所有数据
- **灵活导入**：支持合并导入，数据不会丢失
- **版本控制**：导出文件包含版本信息和时间戳

---

## 🚀 快速开始

### 系统要求
- Chrome 浏览器 88.0 及以上版本
- 支持 Windows、macOS、Linux

### 安装步骤

1. **下载项目**
   ```bash
   git clone https://github.com/nianouth/account-manager.git
   cd account-manager
   ```

2. **打开 Chrome 扩展程序页面**
   - 访问 `chrome://extensions/`
   - 或点击菜单：更多工具 → 扩展程序

3. **启用开发者模式**
   - 在扩展程序页面右上角，开启"开发者模式"

4. **加载扩展**
   - 点击"加载已解压的扩展程序"
   - 选择项目文件夹 `account-manager`
   - 扩展将自动加载并显示在扩展列表中

---

## 📖 使用指南

### 首次使用

#### 步骤 1：添加网站
1. 点击扩展图标，打开弹出窗口
2. 点击网站选择器右侧的 **+** 按钮
3. 填写网站信息：
   - **网站名称**：如"开发环境"、"生产环境"
   - **登录页面 URL**：完整的登录页面地址
     - 示例：`https://dev.example.com/login`
     - 支持通配符：`https://example.com/login/*`
   - **登录按钮 ID**：（可选）默认 `ch_login_btn`
   - **登录按钮 Class**：（可选）默认 `formBtn`
4. 点击"保存"

#### 步骤 2：添加账号
1. 在网站选择器中选择刚添加的网站
2. 点击"+ 添加账号"按钮
3. 填写账号信息：
   - **用户名**：账号的显示名称
   - **账号**：登录使用的邮箱或手机号
   - **密码**：登录密码
   - **备注**：（可选）如"管理员账号"
4. 点击"保存"

#### 步骤 3：一键登录
1. 访问对应的登录页面
2. 悬浮面板会自动显示在页面右上角
3. 在悬浮面板或弹出窗口中点击账号的"登录"按钮
4. 系统自动填充并提交登录表单

### 日常操作

#### 🔍 搜索账号
- 在搜索框输入关键词，实时筛选匹配的账号

#### ✏️ 编辑信息
- 点击网站或账号的"编辑"按钮，修改信息后保存

#### 🗑️ 删除数据
- 点击"删除"按钮，确认后即可删除
- **注意**：删除网站会同时删除其下所有账号

#### 💾 备份数据
1. 点击底部"导出"按钮
2. 系统自动下载 JSON 文件
3. 文件名格式：`account-manager-export-YYYY-MM-DD.json`

#### 📥 恢复数据
1. 点击底部"导入"按钮
2. 选择之前导出的 JSON 文件
3. 确认导入，数据自动合并

---

## 🛠️ 技术架构

### 技术栈
- **核心**：原生 JavaScript (ES6+)
- **框架**：Chrome Extension Manifest V3
- **存储**：Chrome Storage API (local)
- **加密**：Web Crypto API (AES-GCM)
- **浏览器 API**：Tabs API、Scripting API、Runtime API

### 架构设计

#### Service Worker (background.js)
```
职责：
- 扩展生命周期管理（安装、更新）
- 监听标签页更新，自动匹配网站
- 处理 URL 变化和网站切换
- 提供备份恢复消息接口
```

#### Content Script (content.js)
```
职责：
- 注入悬浮面板到匹配的登录页面
- 实现表单自动填充和提交
- 监听 URL 变化（包括 SPA 路由）
- 支持面板拖拽和位置保存
```

#### Popup (popup.html/popup.js)
```
职责：
- 提供完整的管理界面
- 网站和账号的 CRUD 操作
- 数据导入导出功能
- 实时搜索和筛选
```

#### 加密工具 (crypto-utils.js)
```
职责：
- 密码加密（AES-GCM）
- 密码解密
- 密钥管理
```

### 安全机制

#### 数据加密
- 密码使用 AES-GCM 算法加密
- 采用 256 位密钥强度
- 每次加密生成随机 IV

#### XSS 防护
- 使用 `textContent` 代替 `innerHTML`
- 使用 `createElement` 创建元素
- 避免动态执行代码

#### 权限控制
- 仅请求必要权限：`storage`、`activeTab`、`scripting`
- 使用 `host_permissions` 控制访问范围
- 配置 CSP 策略防止代码注入

### 项目结构
```
account-manager/
├── icons/                    # 图标文件
│   └── icon.png
├── images/                   # 截图示例
├── manifest.json             # 扩展配置 (V3)
├── background.js             # Service Worker
├── content.js                # 内容脚本
├── popup.html                # 弹出窗口 HTML
├── popup.js                  # 弹出窗口逻辑
├── crypto-utils.js           # 加密工具
├── styles.css                # 样式文件
├── config.example.json       # 配置示例
└── README.md                 # 项目文档
```

---

## ❓ 常见问题

### Q: 密码存储安全吗？
**A:** 密码使用 AES-GCM 加密后存储在 Chrome 本地存储中，不会上传到任何服务器。即使数据被导出，没有密钥也无法解密。

### Q: 悬浮面板不显示怎么办？
**A:** 请检查：
- 当前页面 URL 是否与网站配置的登录页面 URL 匹配
- 确保已添加网站并正确配置登录页面 URL
- 刷新页面重试

### Q: 自动登录失败怎么办？
**A:** 请检查：
- 登录按钮 ID 和 Class 是否配置正确
- 使用浏览器开发者工具检查登录按钮的实际 ID 和 Class
- 某些网站可能有额外的验证机制（如验证码）

### Q: 如何配置登录按钮选择器？
**A:**
1. 打开目标网站的登录页面
2. 按 F12 打开开发者工具
3. 使用"选择元素"工具点击登录按钮
4. 在 Elements 面板中查看按钮的 `id` 和 `class` 属性
5. 在网站配置中填写对应的值

### Q: 支持哪些网站？
**A:** 理论上支持所有使用标准 HTML 表单的网站。如果遇到不兼容情况，请提交 Issue。

### Q: 数据会丢失吗？
**A:** 数据存储在 Chrome 本地，不会自动丢失。建议定期导出备份，防止意外情况。

---

## 🗺️ 版本历史

### v1.2.0（当前版本）
- ✨ **全新视觉设计**：引入现代化配色方案（蓝色渐变、绿色、红色、橙色）
- 🎨 **UI 全面优化**：渐变按钮、阴影效果、悬停动画
- ⭐ **账号收藏功能**：收藏常用账号，自动置顶显示
- 📋 **一键复制**：快速复制账号和密码到剪贴板
- ⌨️ **快捷键支持**：
  - `Ctrl/Cmd + K`：聚焦搜索框
  - `Ctrl/Cmd + N`：添加新账号
  - `Esc`：关闭模态框
- 🎉 **彩色 Toast 提示**：成功、错误、警告、信息四种类型
- 🔒 **密码强度检测**：实时显示密码强度（弱、中等、强、非常强）
- 💫 **优化空状态**：精美的插图和友好的引导提示
- ⚡ **性能优化**：更流畅的动画和过渡效果

### v1.1.0
- ✅ 优化网站匹配逻辑，支持路径通配符 `/*`
- ✅ 改进悬浮面板显示逻辑，仅在匹配页面显示
- ✅ 支持 SPA 路由变化监听
- ✅ 增强表单自动填充功能
- ✅ 修复 XSS 安全风险
- ✅ 添加实时搜索功能
- ✅ 优化 UI 设计和用户体验
- ✅ 改进错误处理和提示信息

### v1.0.0
- ✅ 初始版本发布
- ✅ 实现网站管理和账号管理
- ✅ 支持一键登录和自动网站切换
- ✅ 实现 AES-GCM 加密
- ✅ 双界面操作模式
- ✅ 数据导入导出功能

---

## 🔮 未来计划

- [ ] 支持自定义主密码
- [ ] 支持浏览器指纹识别
- [ ] 支持多账号同时登录
- [ ] 增加快捷键操作
- [ ] 支持账号使用统计
- [ ] 支持账号分组管理
- [ ] 支持密码强度检测
- [ ] 提供更多主题选项
- [ ] 支持云端同步（可选）

---

## 📞 联系方式

- **GitHub 仓库**：[https://github.com/nianouth/account-manager](https://github.com/nianouth/account-manager)
- **问题反馈**：[提交 Issue](https://github.com/nianouth/account-manager/issues)

---

## 📄 开源协议

本项目采用 [MIT 协议](LICENSE) 开源。

---

## ⚠️ 免责声明

本扩展仅用于合法的账号管理目的，请勿用于任何非法用途。使用本扩展即表示您同意：

1. 自行承担使用风险
2. 妥善保管导出的数据文件
3. 不在公共计算机上使用
4. 定期备份数据到安全位置

---

<div align="center">

**🔒 安全提醒**

定期备份数据 • 使用强密码 • 不分享导出文件 • 不在公共设备使用

Made with ❤️ by [nianouth](https://github.com/nianouth)

</div>
